<div class="cadastro-container">
  <div class="cadastro-card">
    <h2>Crie sua conta</h2>
    
    <mat-stepper [linear]="true" #stepper>
      
      <mat-step [stepControl]="pessoalForm">
        <form [formGroup]="pessoalForm">
          <ng-template matStepLabel>Dados Pessoais</ng-template>
          
          <div class="form-field">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Nome Completo</mat-label>
              <input matInput formControlName="nome" placeholder="Ex: Wanda Maximoff">
              <mat-error *ngIf="pessoalForm.get('nome')?.hasError('required')">Obrigatório</mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>CPF</mat-label>
              <input matInput formControlName="cpf" placeholder="Apenas números">
              <mat-error>CPF inválido (11 dígitos)</mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" placeholder="email@exemplo.com">
              <mat-error>Email inválido</mat-error>
            </mat-form-field>
          </div>

          <div class="step-actions">
            <button mat-flat-button color="primary" matStepperNext>Próximo</button>
          </div>
        </form>
      </mat-step>

      <mat-step [stepControl]="contatoForm">
        <form [formGroup]="contatoForm">
          <ng-template matStepLabel>Contato e Endereço</ng-template>
          
          <div formGroupName="telefone" class="row">
            <mat-form-field appearance="outline" style="width: 30%">
              <mat-label>DDD</mat-label>
              <input matInput formControlName="codigoArea">
            </mat-form-field>
            <mat-form-field appearance="outline" style="width: 68%">
              <mat-label>Número</mat-label>
              <input matInput formControlName="numero">
            </mat-form-field>
          </div>

          <div formGroupName="endereco">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>CEP</mat-label>
              <input matInput formControlName="cep" (blur)="buscarCep()" maxlength="8">
            </mat-form-field>

            <div class="row">
              <mat-form-field appearance="outline" style="width: 70%">
                <mat-label>Rua</mat-label>
                <input matInput formControlName="rua">
              </mat-form-field>
              <mat-form-field appearance="outline" style="width: 28%">
                <mat-label>Nº</mat-label>
                <input matInput id="numeroInput" formControlName="numero">
              </mat-form-field>
            </div>
          </div>

          <div class="step-actions">
            <button mat-button matStepperPrevious>Voltar</button>
            <button mat-flat-button color="primary" matStepperNext>Próximo</button>
          </div>
        </form>
      </mat-step>

      <mat-step [stepControl]="acessoForm">
        <form [formGroup]="acessoForm">
          <ng-template matStepLabel>Login</ng-template>
          
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nome de Usuário</mat-label>
            <input matInput formControlName="username">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Senha</mat-label>
            <input matInput type="password" formControlName="senha">
          </mat-form-field>

          <div class="step-actions">
            <button mat-button matStepperPrevious>Voltar</button>
            <button mat-flat-button color="accent" (click)="onSubmit()">Finalizar Cadastro</button>
          </div>
        </form>
      </mat-step>

    </mat-stepper>
    
    <div style="text-align: center; margin-top: 15px;">
        <a routerLink="/login" class="link-login">Já tem conta? Entrar</a>
    </div>
  </div>
</div>