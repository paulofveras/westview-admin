<header>
  <a (click)="goToStore()" class="header-title-link" style="cursor: pointer;">
    <h1>{{ isStoreView() ? 'Westview Comics' : 'Westview Admin' }}</h1>
  </a>

  <nav>
<ng-container *ngIf="isAdminView() && authService.isLoggedIn() && authService.isFuncionario(); else storeNav">
      <ul>
        <li><a routerLink="/quadrinhos/list" routerLinkActive="active" class="nav-link">Quadrinhos</a></li>
        
        <li><a routerLink="/pedidos/list" routerLinkActive="active" class="nav-link">Pedidos</a></li>
        
        <li><a routerLink="/fornecedores/list" routerLinkActive="active" class="nav-link">Fornecedores</a></li>
        <li><a routerLink="/clientes/list" routerLinkActive="active" class="nav-link">Clientes</a></li>
        <li *ngIf="authService.hasRole('Administrador')">
          <a routerLink="/usuarios/list" routerLinkActive="active" class="nav-link">Usuarios</a>
        </li>
        <li *ngIf="authService.hasRole('Administrador')">
          <a routerLink="/administradores/list" routerLinkActive="active" class="nav-link">Administradores</a>
        </li>
        <li><a (click)="goToStore()" class="nav-link">Ir para Loja</a></li>
      </ul>
    </ng-container>

    <ng-template #storeNav>
      <ul>
        <li *ngIf="authService.isFuncionario()">
          <a (click)="goToAdmin()" class="nav-link">Área Administrativa</a>
        </li>

        <li *ngIf="authService.isLoggedIn() && !authService.isFuncionario()">
          <a routerLink="/meus-pedidos" routerLinkActive="active" class="nav-link">Meus Pedidos</a>
        </li>

        <li *ngIf="!authService.isFuncionario()">
          <a routerLink="/carrinho" routerLinkActive="active" class="nav-link cart-link">
            Carrinho
            <span *ngIf="cartCount > 0" class="cart-badge">{{ cartCount }}</span>
          </a>
        </li>
      </ul>
    </ng-template>

    <div class="user-actions">
      <ng-container *ngIf="authService.isLoggedIn()">
        <span class="welcome-text">Olá, <strong>{{ nomeUsuario }}</strong></span>
        
        <a routerLink="/perfil" routerLinkActive="active" class="nav-link">Meu Perfil</a>
        <button (click)="logout()" class="btn-logout">Sair</button>
      </ng-container>
      
      <ng-container *ngIf="!authService.isLoggedIn()">
         <a routerLink="/login" class="nav-link">Entrar / Cadastrar</a>
      </ng-container>
    </div>

  </nav>
</header>

<main>
  <router-outlet></router-outlet>
</main>
